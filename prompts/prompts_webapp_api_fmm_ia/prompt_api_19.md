# prompt_api_18.md

## prompt
As an advanced programmer in Python, with FastAPI, make a detailed command and place it in replacement of the "Summarizing Documents with BART using ktrain" and an error management




```python
@app.post("/summary/ktrain_transformer_summarizer", tags=['ktrain_transformer_summarizer'])
async def ktrain_transformer_summarizer(text: str):
    '''
    Summarizing Documents with BART using ktrain

    '''
    ts = text.TransformerSummarizer()
    summary = ts.summarize(text, max_length=100)
    return {"summary": summary} 
```

## output
from fastapi import FastAPI, HTTPException
from ktrain import text

app = FastAPI()

@app.post("/summary/ktrain_transformer_summarizer", tags=['ktrain_transformer_summarizer'])
async def ktrain_transformer_summarizer(text: str):
    '''
    Summarizing Documents with BART using ktrain.

    This endpoint accepts a text document and returns a summary generated by the BART model using ktrain.

    Parameters:
    - text (str): The input text document to be summarized.

    Returns:
    - summary (str): The summarized text document.

    Raises:
    - HTTPException 400: If the input text is empty or None.

    Example Usage:
    ```python
    import requests

    url = "http://localhost:8000/summary/ktrain_transformer_summarizer"
    data = {"text": "Your input text goes here."}
    response = requests.post(url, json=data)
    print(response.json())
    ```
    '''
    if not text:
        raise HTTPException(status_code=400, detail="Input text cannot be empty")

    try:
        ts = text.TransformerSummarizer()
        summary = ts.summarize(text, max_length=100)
        return {"summary": summary}
    except Exception as e:
        raise HTTPException(status_code=500, detail=f"Error summarizing text: {str(e)}")
